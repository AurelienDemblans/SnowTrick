{% extends 'base.html.twig' %}

{% block title %}
	SnowTrick : édition
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="{{ asset('styles/trickPage.css') }}" type="text/css" media="all"/>
	<link rel="stylesheet" href="{{ asset('styles/listComment.css') }}" type="text/css" media="all"/>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{ asset('asset/JS/editTrick.js') }}"></script>
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<h1 class="text-center">Édition de trick</h1>

		{{ form_start(form) }}

		<div class="form-group">
			{{ form_label(form.name, 'Nom du trick', {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.name, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.name) }}
		</div>

		<div class="form-group">
			{{ form_label(form.description, 'Description', {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.description) }}
		</div>

		<div class="form-group">
			{{ form_label(form.trickPictures, 'Images du trick', {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.trickPictures, {'attr': {'class': 'form-control-file'}}) }}
			{{ form_errors(form.trickPictures) }}
		</div>

		<div class="form-group">
			{{ form_label(form.trickVideos, 'Vidéos du trick', {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.trickVideos, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.trickVideos) }}
		</div>


		<div class="form-group">
			Image(s) actuelle(s) du trick
		</div>

		<div class="pictures_videos_list" id="pictures_videos_list">
			<div class="trick_list row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xxl-4 g-4 m-0" id="trick_list">
				{% for picture in trick.trickPictures %}
					<div class="card h-100 picture-card" id="picture-{{picture.id}}">
						<img src="{{ asset('asset/pictures/' ~ picture.url) }}"/>
						<div class="card-footer text-center">
							<button type="button" class="btn btn-danger hover-text delete_picture" data-id="{{picture.id}}">
								Supprimer
							</button>
						</div>
					</div>
				{% endfor %}
			</div>
			<div style='display : none' id='no-picture-card'>Toutes les anciennes photos ont été supprimées</div>
		</div>

		<div class="form-group">
			Vidéo(s) actuelle(s) du trick
		</div>

		<div class="pictures_videos_list" id="pictures_videos_list">
			<div class="trick_list row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xxl-4 g-4 m-0" id="trick_list">
				{% for video in trick.trickVideos %}
					<div class="card h-100 video-card" id="video-{{video.id}}">
						{% if video.isExternalUrl() %}
							<iframe src={{video.url}} title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
						{% else %}
							<video controls>
								<source src="{{ asset('asset/videos/' ~ video.url) }}" type="video/mp4">
								Votre navigateur ne supporte pas la vidéo HTML5.
							</video>
						{% endif %}
						<div class="card-footer text-center">
							<button type="button" class="btn btn-danger hover-text delete_video" data-id="{{video.id}}">
								Supprimer
							</button>
						</div>
					</div>
				{% endfor %}
			</div>
			<div style='display : none' id='no-video-card'>Toutes les anciennes vidéos ont été supprimées</div>
		</div>

		<div class="form-group">
			{{ form_label(form.trickGroup, 'trickGroup du trick', {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.trickGroup, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.trickGroup) }}
		</div>

		<div class="form-group">
			{{ form_label(form.trickVideosUrl, 'trickVideosUrl du trick', {'label_attr': {'class': 'form-label'}}) }}
			{{ form_widget(form.trickVideosUrl, {'attr': {'class': 'form-control'}}) }}
			{{ form_errors(form.trickVideosUrl) }}
		</div>

		<input type="hidden" id="pictures_input" name="pictures_id">
		<input type="hidden" id="videos_input" name="videos_id">

		<button type="submit" class="btn btn-primary mt-3">Valider</button>

		{{ form_end(form) }}
	</div>
{% endblock %}
